<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract the set of animals of the specified species and strain - or just add the species and strain for each animal. — getSubjSpeciesStrain • sendigR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract the set of animals of the specified species and strain - or just add the species and strain for each animal. — getSubjSpeciesStrain"><meta name="description" content="Returns a data table with the set of animals included in the
animalList matching the species and strain specified in the
speciesFilter and strainFilter.
If the speciesFilter and strainFilter are empty (null, na or
empty string) - all rows from animalList are returned with additional
populated SPECIES and STRAIN columns."><meta property="og:description" content="Returns a data table with the set of animals included in the
animalList matching the species and strain specified in the
speciesFilter and strainFilter.
If the speciesFilter and strainFilter are empty (null, na or
empty string) - all rows from animalList are returned with additional
populated SPECIES and STRAIN columns."><meta property="og:image" content="https://phuse-org.github.io/sendigR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sendigR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Introduction.html">Introduction to sendigR</a></li>
    <li><a class="dropdown-item" href="../articles/SendDashboard.html">SendDashboard</a></li>
    <li><a class="dropdown-item" href="../articles/Usingxptcleaner.html">Using xptcleaner</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/phuse-org/sendigR/wiki/Resources">Resources</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/phuse-org/sendigR/" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extract the set of animals of the specified species and strain - or just add the species and strain for each animal.</h1>
      <small class="dont-index">Source: <a href="https://github.com/phuse-org/sendigR/blob/HEAD/R/getSubjSpeciesStrain.R" class="external-link"><code>R/getSubjSpeciesStrain.R</code></a></small>
      <div class="d-none name"><code>getSubjSpeciesStrain.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns a data table with the set of animals included in the
<code>animalList</code> matching the species and strain specified in the
<code>speciesFilter</code> and <code>strainFilter</code>.<br>
If the <code>speciesFilter</code> and <code>strainFilter</code> are empty (null, na or
empty string) - all rows from <code>animalList</code> are returned with additional
populated SPECIES and STRAIN columns.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getSubjSpeciesStrain</span><span class="op">(</span></span>
<span>  <span class="va">dbToken</span>,</span>
<span>  <span class="va">animalList</span>,</span>
<span>  speciesFilter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strainFilter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  inclUncertain <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  exclusively <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  noFilterReportUncertain <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dbtoken">dbToken<a class="anchor" aria-label="anchor" href="#arg-dbtoken"></a></dt>
<dd><p>Mandatory<br>
Token for the open database connection (see <code><a href="initEnvironment.html">initEnvironment</a></code>).</p></dd>


<dt id="arg-animallist">animalList<a class="anchor" aria-label="anchor" href="#arg-animallist"></a></dt>
<dd><p>Mandatory, data.table.<br>
A table with the list of animals to process.<br>
The table must include at least columns named 'STUDYID' and 'USUBJID'.</p></dd>


<dt id="arg-speciesfilter">speciesFilter<a class="anchor" aria-label="anchor" href="#arg-speciesfilter"></a></dt>
<dd><p>Optional, character.<br>
The species value(s) to use as criterion for filtering of the input data
table.<br>
It can be a single string, a vector or a list of multiple strings.</p></dd>


<dt id="arg-strainfilter">strainFilter<a class="anchor" aria-label="anchor" href="#arg-strainfilter"></a></dt>
<dd><p>Optional, character.<br>
The strain value(s) to use as criterion for filtering of the input data
table.<br>
It is only valid to specify value(s) if one or more values have been
specified for parameter <code>speciesFilter</code><br>
It can be a single string, a vector or a list of multiple strings.
When multiple values are specified for <code>speciesFilter</code>, each strain
value must be prefixed by species and ':' , e.g.
<code>c('RAT:WISTAR','DOG: BEAGLE')</code>.<br>
There may be included any number of blanks after ':'</p></dd>


<dt id="arg-incluncertain">inclUncertain<a class="anchor" aria-label="anchor" href="#arg-incluncertain"></a></dt>
<dd><p>Mandatory, boolean.<br>
Indicates whether animals for which the species or strain cannot be
confidently identified shall be included or not in the output data table.</p></dd>


<dt id="arg-exclusively">exclusively<a class="anchor" aria-label="anchor" href="#arg-exclusively"></a></dt>
<dd><p>Mandatory, boolean.</p><ul><li><p>TRUE: Include animals only for studies with no other species and
optional strains then included in <code>speciesFilter</code> and
<code>strainFilter</code></p></li>
<li><p>FALSE: Include animals for all studies with species and strain
matching <code>speciesFilter</code> and <code>strainFilter</code> respectively.</p></li>
</ul></dd>


<dt id="arg-nofilterreportuncertain">noFilterReportUncertain<a class="anchor" aria-label="anchor" href="#arg-nofilterreportuncertain"></a></dt>
<dd><p>Optional, boolean.<br>
Only relevant if the <code>speciesFilter</code> and  <code>strainFilter</code> are
empty.<br>
Indicates if the reason should be included if the species or strain cannot
be confidently decided for an animal.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function returns a data.table with columns:</p><ul><li><p>STUDYID       (character)</p></li>
<li><p>Additional columns contained in the <code>animalList</code> table</p></li>
<li><p>SPECIES       (character)
The value is always returned in uppercase and trimmed for leading/trailing
blanks.</p></li>
<li><p>STRAIN        (character)
The value is always returned in uppercase and trimmed for leading/trailing
blanks.</p></li>
<li><p>UNCERTAIN_MSG (character)<br>
Included when parameter <code>inclUncertain=TRUE</code>.<br>
In case the species or strain cannot be confidently matched during the
filtering of data, the column contains an indication of the reason.<br>
Is NA for rows where species and strain can be confidently matched.<br>
A non-empty UNCERTAIN_MSG value generated by this function is merged with
non-empty UNCERTAIN_MSG values which may exist in the input set of animals
specified in <code>animalList</code> - separated by '|'.</p></li>
<li><p>NOT_VALID_MSG (character)<br>
Included when parameter <code>noFilterReportUncertain=TRUE</code>.<br>
In case the species or strain cannot be confidently decided, the column
contains an indication of the reason.<br>
Is NA for rows where species and strain can be confidently decided.<br>
A non-empty NOT_VALID_MSG value generated by this function is merged with
non-empty NOT_VALID_MSG values which may exist in the input set of animals
<code>animalList</code> - separated by '|'.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The species and strain per animal respectively are identified by a
hierarchical lookup in these domains</p><ul><li><p>DM - If the DM.SPECIES (DM.STRAIN) isn't empty, this value is
included in the output.<br></p></li>
<li><p>TX - if a TX parameter 'SPECIES' ('STRAIN') exists for the group
related to the animal, the TXVAL value for this is included in the
output.<br></p></li>
<li><p>TS - if a TS parameter 'SPECIES' ('STRAIN') exists, this is included
in the output.<br></p></li>
</ul><p>The comparisons of species/strain values is done case insensitive and trimmed
for leading/trailing blanks.</p>
<p>If input parameter <code>inclUncertain=TRUE</code>, uncertain animals are included
in the output set. These uncertain situations are identified and reported for
SPECIES and STRAIN respectively (in column UNCERTAIN_MSG):</p><ul><li><p>TS parameter SPECIES/STRAIN is missing or invalid (not CT value -
CDISC SEND code list SPECIES/STRAIN) and TX parameter SPECIES/STRAIN is
missing or invalid (not CT value) and DM.SPECIES/STRAIN is missing or
invalid (not CT value)</p></li>
<li><p>Different values of SPECIES/STRAIN across TS, TX and DM for studies
where no or only one TS parameter SPECIES/STRAIN is registered</p></li>
<li><p>Multiple TS parameter SPECIES/STRAIN values are registered for study
and TX parameter SPECIES/STRAIN and/or DM.SPECIES/STRAIN do not match any
of the TS values.</p></li>
<li><p>Multiple TS parameter SPECIES/STRAIN values are registered for study
and TX parameter SPECIES/STRAIN and DM.SPECIES/STRAIN are unequal.</p></li>
</ul><p>The same checks are performed and reported in column NOT_VALID_MSG if
<code>speciesFilter</code> and <code>strainFilter</code> are empty and
<code>noFilterReportUncertain=TRUE</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Extract rats and mice plus uncertain animals</span></span></span>
<span class="r-in"><span><span class="fu">getSubjSpeciesStrain</span><span class="op">(</span><span class="va">dbToken</span>, <span class="va">controlAnimals</span>,</span></span>
<span class="r-in"><span>                     speciesFilter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'RAT'</span>, <span class="st">'MOUSE'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     inclUncertain <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Extract Spargue-Dawley rats plus uncertain animals.</span></span></span>
<span class="r-in"><span><span class="co"># Include only animals from studies which do not contain other species or</span></span></span>
<span class="r-in"><span><span class="co"># strains</span></span></span>
<span class="r-in"><span><span class="fu">getSubjSpeciesStrain</span><span class="op">(</span><span class="va">dbToken</span>, <span class="va">controlAnimals</span>,</span></span>
<span class="r-in"><span>                     speciesFilter <span class="op">=</span> <span class="st">'RAT'</span>,</span></span>
<span class="r-in"><span>                     strainFilter <span class="op">=</span> <span class="st">'SPRAGUE-DAWLEY'</span>,</span></span>
<span class="r-in"><span>                     inclUncertain <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                     exclusively <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                     noFilterReportUncertain <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Extract Wistar rats and and Beagle dogs - and no uncertain animals</span></span></span>
<span class="r-in"><span><span class="fu">getSubjSpeciesStrain</span><span class="op">(</span><span class="va">dbToken</span>, <span class="va">controlAnimals</span>,</span></span>
<span class="r-in"><span>                     speciesFilter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'RAT'</span>, <span class="st">'DOG'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                     strainFilter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'RAT: WISTAR'</span>, <span class="st">'DOG: BEAGLE'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># No filtering, just add SPECIES and STRAIN - do not include messages when</span></span></span>
<span class="r-in"><span><span class="co"># these values cannot be confidently found</span></span></span>
<span class="r-in"><span><span class="fu">getSubjSpeciesStrain</span><span class="op">(</span><span class="va">dbToken</span>, <span class="va">controlAnimals</span>,</span></span>
<span class="r-in"><span>                     noFilterReportUncertain <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bo Larsen, Yousuf Ali, Kevin Snyder, William Houser, Brianna Paisley, Cmsabbir Ahmed, Susan Butler, Michael Rosentreter, Michael Denieu, Wenxian Wang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

