<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extract a set of findings for a specified study phase - or just add phase
for each animal. — getFindingsPhase • sendigR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extract a set of findings for a specified study phase - or just add phase
for each animal. — getFindingsPhase"><meta property="og:description" content="Returns a data table with the set of findings rows included in the
findings of the phase(s) specified in the phaseFilter.
If the phaseFilter is empty (null, na or empty string), all rows from
findings are returned with the an additional PHASE column."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sendigR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Introduction.html">Introduction to sendigR</a>
    </li>
    <li>
      <a href="../articles/SendDashboard.html">SendDashboard</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract a set of findings for a specified study phase - or just add phase
for each animal.</h1>
    
    <div class="hidden name"><code>getFindingsPhase.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns a data table with the set of findings rows included in the
<code>findings</code> of the phase(s) specified in the <code>phaseFilter</code>.<br>
If the <code>phaseFilter</code> is empty (null, na or empty string), all rows from
<code>findings</code> are returned with the an additional PHASE column.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">getFindingsPhase</span><span class="op">(</span>
  <span class="va">dbToken</span>,
  <span class="va">findings</span>,
  phaseFilter <span class="op">=</span> <span class="cn">NULL</span>,
  inclUncertain <span class="op">=</span> <span class="cn">FALSE</span>,
  noFilterReportUncertain <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dbToken</dt>
<dd><p>Mandatory<br>
Token for the open database connection (see <code><a href="initEnvironment.html">initEnvironment</a></code>).</p></dd>
<dt>findings</dt>
<dd><p>Mandatory, data.table.<br>
A data.table with the set of finding rows to process.<br>
The table must include at least columns named</p><ul><li><p>STUDYID</p></li>
<li><p>USUBJID</p></li>
<li><p>DOMAIN</p></li>
<li><p>domainSEQ</p></li>
<li><p>domainDTC</p></li>
</ul><p>where domain is the name of the actual findings domain - e.g. LBSEQ and
LBDTC</p></dd>
<dt>phaseFilter</dt>
<dd><p>Optional, character.<br>
The phase value criterion to be used for filtering of the list of animals.<br>
It can be a single string, a vector or a list of multiple strings.</p></dd>
<dt>inclUncertain</dt>
<dd><p>Mandatory, boolean.<br>
Only relevant if the <code>phaseFilter</code> is not empty.<br>
Indicates whether finding rows for which the phase cannot be confidently
identified shall be included or not in the output data table.</p></dd>
<dt>noFilterReportUncertain</dt>
<dd><p>Mandatory, boolean.<br>
Only relevant if the <code>phaseFilter</code> is empty.<br>
Indicates if the reason should be included if the phase cannot be
confidently decided for an animal.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The function returns a data.table with columns in this order:</p><ul><li><p>All columns contained in the <code>findings</code> input table (original
order except optional UNCERTAIN_MSG and NOT_VALID_MSG)</p></li>
<li><p>PHASE          (character)</p></li>
<li><p>UNCERTAIN_MSG  (character)<br>
Included when parameter <code>inclUncertain=TRUE</code>.<br>
In case the phase cannot be confidently matched during the
filtering of data, the column contains an indication of the reason.<br>
If any uncertainties have been identified for individual subjects included in
pools for pooled finding rows, all messages for subjects per pool/findings
are merged together and reported as one message per pool/finding.<br>
Is NA for rows where phase can be confidently matched.<br>
A non-empty UNCERTAIN_MSG value generated by this function is merged with
non-empty UNCERTAIN_MSG values which may exist in the input set of findings
specified in <code>findings</code> - separated by '|'.</p></li>
<li><p>NOT_VALID_MSG (character)<br>
Included when parameter <code>noFilterReportUncertain=TRUE</code>.<br>
In case the phase cannot be confidently decided, the column
contains an indication of the reason.<br>
Is NA for rows where phase can be confidently decided.<br>
A non-empty NOT_VALID_MSG value generated by this function is merged with
non-empty NOT_VALID_MSG values which may exist in the input set of findings
<code>findings</code> - separated by '|'.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>The logic for the extraction is based on the subject elements and the trial
design domains - for each finding row:</p><ul><li><p>The related subject element is found in SE as the row where the
value of domainDTC is within the interval from SESTDTC to SEENDTC</p></li>
<li><p>The actual EPOCH is found in TA in the row matching the found
element (via the ETCD value)</p></li>
<li><p>The actual study phase is derived from the EPOCH value matching at
set of text patterns</p></li>
</ul><p>For pooled findings rows - i.e. POOLID is populated instead of USUBJID - the
phase is identified per animal included in the each pool and finding, and if all
identified phases are equal per pool and finding, the identified phase are
returned per pool and finding.</p>
<p>The populated value of a phase is one of:</p><ul><li><p>'Screening'<br>
If TA.EPOCH fulfills one:</p><ul><li><p>contains 'pre' followed by one of
['treat','trt','dos',test','study','exposure']</p></li>
<li><p>contains one of
['acclimat','screen','baseline','allocat','random']</p></li>
</ul></li>
<li><p>'Recovery'<br>
If TA.EPOCH doesn't fulfill the pattern for 'Screening' and fulfills one
of:</p><ul><li><p>contains 'recovery'</p></li>
<li><p>contains 'post' followed by one of
['treat','trt','dos','test','study','exposure']</p></li>
</ul></li>
<li><p>'Treatment'<br>
If TA.EPOCH doesn't fulfill the patterns for 'Screening' or 'Recovery'
and fulfills both:</p><ul><li><p>contains one of
['treat','trt','dos','test','exposure']</p></li>
<li><p>does not contain any of
['off','non'|','free'|','holiday']</p></li>
</ul></li>
<li><p>'Uncertain'<br>
If the TA.EPOCH is empty or does not fulfills any of the requirements
described for the three phases above.</p></li>
</ul><p>If input parameter <code>inclUncertain=TRUE</code>, findings rows where the phase
cannot be confidently identified are included in the output set. These
uncertain situations are identified and reported (in column UNCERTAIN_MSG):</p><ul><li><p>One of the date/time values SESTDTC, SEENDTC or domainDTC is empty
or contains an invalid ISO 8601 value</p></li>
<li><p>The value of domainDTC is included in more then one SESTDTC/SEENDTC
interval</p></li>
<li><p>The EPOCH value does not match any of the patterns identifying the
set of possible study phases.</p></li>
<li><p>Different phases have been identified for individual subjects in a
pool for a given finding</p></li>
</ul><p>The same checks are performed and reported in column NOT_VALID_MSG if
<code>phaseFilter</code> is empty and <code>noFilterReportUncertain=TRUE</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Bo Larsen, Yousuf Ali, Kevin Snyder, William Houser,
Brianna Paisley, Wenxian Wang.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

