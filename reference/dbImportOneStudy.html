<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Import SEND study data in SAS xport format into a SEND database from a single study folder — dbImportOneStudy • sendigR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Import SEND study data in SAS xport format into a SEND database from a single study folder — dbImportOneStudy"><meta name="description" content="Check each of the SAS xpt file located in the specified folder - import
content from file and load it into the corresponding SEND domain table in the
open database."><meta property="og:description" content="Check each of the SAS xpt file located in the specified folder - import
content from file and load it into the corresponding SEND domain table in the
open database."><meta property="og:image" content="https://phuse-org.github.io/sendigR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sendigR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Introduction.html">Introduction to sendigR</a></li>
    <li><a class="dropdown-item" href="../articles/SendDashboard.html">SendDashboard</a></li>
    <li><a class="dropdown-item" href="../articles/Usingxptcleaner.html">Using xptcleaner</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/phuse-org/sendigR/wiki/Resources">Resources</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/phuse-org/sendigR/" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Import SEND study data in SAS xport format into a SEND database from a single study folder</h1>
      <small class="dont-index">Source: <a href="https://github.com/phuse-org/sendigR/blob/main/R/populateDBFunctions.R" class="external-link"><code>R/populateDBFunctions.R</code></a></small>
      <div class="d-none name"><code>dbImportOneStudy.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Check each of the SAS xpt file located in the specified folder - import
content from file and load it into the corresponding SEND domain table in the
open database.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dbImportOneStudy</span><span class="op">(</span><span class="va">dbToken</span>, <span class="va">xptPath</span>, overWrite <span class="op">=</span> <span class="cn">FALSE</span>, checkRequiredVars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dbtoken">dbToken<a class="anchor" aria-label="anchor" href="#arg-dbtoken"></a></dt>
<dd><p>Mandatory<br>
Token for the open database connection (see <code><a href="initEnvironment.html">initEnvironment</a></code>).</p></dd>


<dt id="arg-xptpath">xptPath<a class="anchor" aria-label="anchor" href="#arg-xptpath"></a></dt>
<dd><p>Mandatory, character<br>
Location of the SAS xport files</p></dd>


<dt id="arg-overwrite">overWrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Mandatory, boolean<br>
Whether an already existing study in the database may be overwritten by
newly imported data.</p></dd>


<dt id="arg-checkrequiredvars">checkRequiredVars<a class="anchor" aria-label="anchor" href="#arg-checkrequiredvars"></a></dt>
<dd><p>Mandatory, boolean<br>
Whether not-required domains are checked for existence and content of
required variables</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>No return value, called for side effects<br></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>These requirements to the content of the folder must be fulfilled:</p><ol><li><p>The folder must contain some SAS xport files named
<code>[send domain].xpt</code> - the case of the file names doesn't care</p></li>
<li><p>A minimum set of required domain files must be included:
<code>ts.xpt</code>, <code>tx.xpt</code>, <code>dm.xpt</code>.</p></li>
<li><p>Each xpt file must contain one data table with same name as the file
name - i.e. a send domain name.</p></li>
<li><p>Each xpt file must contain a non-empty STUDYID value in each row equal
to the value of TS.STUDYID.</p></li>
<li><p>Each xpt file must contain a set of required column(s).<br>
In general it's (where relevant for the different kinds of domains):<br><code>STUDYID, DOMAIN, --SEQ, USUBJID, --TESTCD, --TEST,--ORRES, --ORRESU,
   --STRESC, --STRESN, --STRESU</code></p></li>
<li><p>The DOMAIN variable must contain the name of the actual domain in
all rows</p></li>
</ol><p>The last two requirements are checked for the required domains in all cases.
For other domains, these two requirements are only checked if parameter
<code>checkRequiredVars = TRUE</code>.<br></p>
<p>If an error is detected, the import and load of data is canceled, and further
execution is aborted (i.e. error message is written to the console).<br>
These error situations are checked and reported:</p><ul><li><p>Any of the requirements 1 to 3 are not fulfilled or any of the
following requirements are not fulfilled for one of the required domains</p></li>
<li><p>A study with the same value if STUDYID exists in the database and
parameter <code>overWrite = FALSE</code>.</p></li>
</ul><p>If one of the requirements 4 to 6 are not fulfilled for a not-required
domain, this domain is excluded from the import. These kinds of issues are
reported as one warning message to the console when data has been loaded.<br></p>
<p>Some non-critical issues, which doesn't prohibit data to be loaded to the
database may be detected. These are reported as one warning message to the
console when data has been loaded (together with eventual warning messages
for skipped domains).<br>
These non-critical issues are checked and reported:</p><ul><li><p>The study folder contains one or more xpt file(s) with names(s) not
matching SEND domain name(s).<br>
Such files are ignored by the import/load process.</p></li>
<li><p>An imported data tables contains one or more column(s) which
do(es)n't exist(s) in the corresponding domain.</p></li>
</ul><p>Databases supported are SQLite and PostgreSQL, the checkDbType function
makes sure one of those types are used</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Do not overwrite if study already exists in the database</span></span></span>
<span class="r-in"><span><span class="fu">dbImportOneStudy</span><span class="op">(</span><span class="va">myDbToken</span>,<span class="st">'/mydatapath/studies/1213443'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Allow to overwrite data if study already exists in the database</span></span></span>
<span class="r-in"><span><span class="fu">dbImportOneStudy</span><span class="op">(</span><span class="va">myDbToken</span>,<span class="st">'/mydatapath/studies/786756'</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bo Larsen, Yousuf Ali, Kevin Snyder, William Houser, Brianna Paisley, Cmsabbir Ahmed, Susan Butler, Michael Rosentreter, Michael Denieu, Wenxian Wang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

