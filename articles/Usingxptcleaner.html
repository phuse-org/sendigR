<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="sendigR">
<title>Using xptcleaner • sendigR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using xptcleaner">
<meta property="og:description" content="sendigR">
<meta property="og:image" content="https://phuse-org.github.io/sendigR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sendigR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction to sendigR</a>
    <a class="dropdown-item" href="../articles/SendDashboard.html">SendDashboard</a>
    <a class="dropdown-item" href="../articles/Usingxptcleaner.html">Using xptcleaner</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/phuse-org/sendigR/wiki/Resources">Resources</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/phuse-org/sendigR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using xptcleaner</h1>
            
            <h4 data-toc-skip class="date">2022-07-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/phuse-org/sendigR/blob/HEAD/vignettes/Usingxptcleaner.Rmd" class="external-link"><code>vignettes/Usingxptcleaner.Rmd</code></a></small>
      <div class="d-none name"><code>Usingxptcleaner.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="description-of-vignette">Description of Vignette<a class="anchor" aria-label="anchor" href="#description-of-vignette"></a>
</h2>
<p>Describes how to use the python package xptcleaner to apply JSON ontology terms to clean SEND xpt files.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>Before we are ready to use the functions in the package, we must ensure that a minimum of prerequisites are fulfilled.</p>
<div class="section level3">
<h3 id="xptcleaner-python-package-and-sendigr-r-package-installation">xptcleaner python package and sendigR R package installation<a class="anchor" aria-label="anchor" href="#xptcleaner-python-package-and-sendigr-r-package-installation"></a>
</h3>
<div class="section level4">
<h4 id="python-and-r-installation">Python and R installation<a class="anchor" aria-label="anchor" href="#python-and-r-installation"></a>
</h4>
<p>R version 4.1.2 and above, Python 3.9.6 and above were the packages used to develop and test the code. Other versions can be used, but some issues may arise depending on versions.</p>
</div>
<div class="section level4">
<h4 id="xptcleaner-python-package-installation">xptcleaner python package installation<a class="anchor" aria-label="anchor" href="#xptcleaner-python-package-installation"></a>
</h4>
<div class="section level5">
<h5 id="using-pip">Using pip<a class="anchor" aria-label="anchor" href="#using-pip"></a>
</h5>
<p>Probably the easiest way: from your conda, virtualenv or just base installation do:</p>
<pre><code>pip install xptcleaner</code></pre>
<p>If you are running on a machine without admin rights, and you want to install against your base installation you can do:</p>
<pre><code>pip install xptcleaner --user</code></pre>
</div>
<div class="section level5">
<h5 id="using-source-archive-or-using-wheel-file-">Using source archive or using wheel file.<a class="anchor" aria-label="anchor" href="#using-source-archive-or-using-wheel-file-"></a>
</h5>
<p>In addtional to install from Python Package Index(PyPI), the source archive and the wheel archive can also be used for installation.</p>
<p>The source archive and the wheel for xptcleaner can be obtained from sendigR Github <a href="https://github.com/phuse-org/sendigR/tree/main/python/xptcleaner/dist" class="external-link">sendigR- xptcleaner</a></p>
<ul>
<li>Using source archive: Using the below shell command to install the xptcleaner package, assume that the source archive is under ‘dist’ sub folder. Replace {version} with the correct version number, e.g. 1.0.0.</li>
</ul>
<pre><code>$ py -m pip install ./dist/xptcleaner-{version}.tar.gz
</code></pre>
<ul>
<li>Using wheel: Using the below shell command to install the xptcleaner package, assume that the wheel file is under ‘dist’ sub folder.</li>
</ul>
<pre><code>$ py -m pip install ./dist/xptcleaner-{version}-py3-none-any.whl
</code></pre>
<p>The following required python packages will be installed during the xptcleaner package installation:<br></p>
<pre><code>* pandas

* pyreadstat</code></pre>
</div>
</div>
<div class="section level4">
<h4 id="sendigr-r-package-installation">sendigR R package installation<a class="anchor" aria-label="anchor" href="#sendigr-r-package-installation"></a>
</h4>
<p>Install sendigR packages, refer to <a href="https://github.com/phuse-org/sendigR/blob/main/README.md" class="external-link">README</a> for more details.</p>
<pre><code><span><span class="co"># Get CRAN version</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"sendigR"</span><span class="op">)</span></span>
<span><span class="co"># Or the development version from GitHub:</span></span>
<span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'phuse-org/sendigR'</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="locating-the-scripts">Locating the scripts<a class="anchor" aria-label="anchor" href="#locating-the-scripts"></a>
</h3>
<p>sendigR is located at: <a href="https://github.com/phuse-org/sendigR/" class="external-link uri">https://github.com/phuse-org/sendigR/</a><br> The importStudies.R script is located at: <a href="https://github.com/phuse-org/sendigR/importStudies.R" class="external-link uri">https://github.com/phuse-org/sendigR/importStudies.R</a><br> The Python code to generate a JSON file for the XPT cleanup is located at: <a href="https://github.com/phuse-org/sendigR/tree/main/python/xptcleaner" class="external-link uri">https://github.com/phuse-org/sendigR/tree/main/python/xptcleaner</a><br></p>
<p>The sample CDISC CT file and the extensible CT file are located under the ‘data-raw’ subfolder of the sendigR package.</p>
</div>
</div>
<div class="section level2">
<h2 id="creating-the-json-for-vocabulary-mapping">Creating the JSON for Vocabulary Mapping<a class="anchor" aria-label="anchor" href="#creating-the-json-for-vocabulary-mapping"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/phuse-org/sendigR" class="external-link">sendigR</a></span><span class="op">)</span></span>
<span><span class="co">#input CDISC and Extensible CT files.</span></span>
<span><span class="va">infile1</span> <span class="op">&lt;-</span> <span class="st">"{path to CT file}/SEND_Terminology_EXTENSIBLE.txt"</span></span>
<span><span class="va">infile2</span> <span class="op">&lt;-</span> <span class="st">"{path to CT file}/SEND Terminology_2021_12_17.txt"</span></span>
<span><span class="co">#output JSON file</span></span>
<span><span class="va">jsonfile</span> <span class="op">&lt;-</span> <span class="st">"{path to CT file to be created}/SENDct.json"</span></span>
<span><span class="co">#Call the gen_vocab function with the input and output files</span></span>
<span><span class="fu">sendigR</span><span class="fu">::</span><span class="fu"><a href="../reference/gen_vocab.html">gen_vocab</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">infile1</span>, <span class="va">infile2</span><span class="op">)</span>,<span class="va">jsonfile</span> <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="standardize-xpt-files-with-the-json-file-created">Standardize xpt files with the json file created<a class="anchor" aria-label="anchor" href="#standardize-xpt-files-with-the-json-file-created"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/phuse-org/sendigR" class="external-link">sendigR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#JSON file used for the xpt cleaning</span></span>
<span><span class="va">jsonfile</span> <span class="op">&lt;-</span> <span class="st">"{path to CT file to be created}/SENDct.json"</span></span>
<span></span>
<span><span class="co">#folder containing the source xpt files</span></span>
<span><span class="va">rawXptFolder</span> <span class="op">&lt;-</span> <span class="st">"{path to xpt files}/96298/"</span></span>
<span><span class="co">#folder containing the cleaned target xpt files</span></span>
<span><span class="va">cleanXptFolder</span> <span class="op">&lt;-</span> <span class="st">"{path to cleaned xpt files}/96298/"</span></span>
<span><span class="co">#Call the standardize_file function to clean the xpt file</span></span>
<span><span class="fu">sendigR</span><span class="fu">::</span><span class="fu"><a href="../reference/standardize_file.html">standardize_file</a></span><span class="op">(</span><span class="va">rawXptFolder</span>, <span class="va">cleanXptFolder</span>, <span class="va">jsonfile</span> <span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Bo Larsen, Yousuf Ali, Kevin Snyder, William Houser, Brianna Paisley, Cmsabbir Ahmed, Susan Butler, Michael Rosentreter, Michael Denieu, Wenxian Wang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
